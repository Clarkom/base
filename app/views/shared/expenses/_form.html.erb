<%= form_for @expense do |form| %>

    <% if expense.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(expense.errors.count, "error") %> prohibited this expense from being saved:</h2>

        <ul>
        <% expense.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>


    <div class="field">
      <%= form.label :amount %>
      <%= form.number_field :amount, id: :expense_amount %>
    </div>

    <div class="field">
      <%= form.label :attached_file %>
      <%= form.text_field :attached_file, id: :expense_attached_file %>
    </div>

    <div class="field">
      <%= form.label :description %>
      <%= form.text_area :description, id: :expense_description %>
    </div>

    <% if @expense.insurance %>

        <div class="field">
          <h3>Break Fields</h3>
          <%= form.fields_for :insurance do |insurance_form| %>
              <%= insurance_form.label :start_date %>
              <%= insurance_form.date_field :start_date %>
              <%= insurance_form.label :end_date %>
              <%= insurance_form.date_field :end_date %>
          <% end %>
        </div>
    <% end %>

    <% if @expense.break %>

        <div class="field">
          <h3>Break Fields</h3>
          <%= form.fields_for :insurance do |break_form| %>
              <%= break_form.label :start_date %>
              <%= break_form.date_field :start_date %>
              <%= break_form.label :end_date %>
              <%= break_form.date_field :end_date %>
          <% end %>
        </div>
    <% end %>

    <% if @expense.damage %>

        <div class="field">
          <h3>Damage Fields</h3>
          <%= form.fields_for :damage do |damage_form| %>

              <%= damage_form.label :damage_type_id %>
              <%= damage_form.collection_select :damage_type_id, DamageType.group(:name), :id, :name, {
                :multiple => false,
                :include_blank => 'Damage Type',
              } %>

              <%= damage_form.label :driver_id %>
              <%= damage_form.collection_select :driver_id, Driver.all, :id, :full_name , {
                :multiple => false,
                :include_blank => 'Driver Name'
              } %>

              <%= damage_form.label :date %>
              <%= damage_form.date_field :date %>

              <%= damage_form.label :kilometers %>
              <%= damage_form.number_field :kilometers %>

          <% end %>
        </div>

    <% end %>

    <% if @expense.owner_take %>

        <div class="field">
          <h3>Owner Take Fields</h3>
          <%= form.fields_for :owner_take do |owner_take_form| %>
              <%= owner_take_form.collection_select :owner_id, Owner.all, :id, :full_name , {
                :multiple => false,
                :include_blank => 'Select an Owner'
              } %>
          <% end %>
        </div>
    <% end %>


    <div class="actions">
      <%= form.submit %>
    </div>


<% end %>
